---
layout:     post
title:      NLP炼金录-bug篇
date:       2019-09-26
author:     zlh
header-img: img/post-bg-coffee.jpeg
catalog: true
tags:
    - NLP
    - 编程
---

## 前言

本文包含：

- 提升NLP模型指标的一些trick。
- 一些常见bug的原因及解决。

#### loss变为nan
- 用到了log函数，并且忘记平滑。
    ``` python
    >>> b = torch.tensor(1e-40)
    >>> torch.log(b)
    tensor(-92.1034)
    >>> b = torch.tensor(1e-50)
    >>> torch.log(b)
    tensor(-inf)
    ```

- 模型参数没有合理的初始化。
之前实现文本翻译LEAM模型对时候出现过。因为涉及到「取模」的操作，
未初始化导致模过大。
    ```python
    >>> a = torch.LongTensor(3,2)
    >>> a 
    tensor([[139938644376440,  94137537088864],
            [             32,              32],
            [              0, 139938644376440]])
    >>> a.norm()
    tensor(inf)

    ```
